(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[478],{1093:function(e,r,a){Promise.resolve().then(a.bind(a,7156))},7156:function(e,r,a){"use strict";a.r(r),a.d(r,{default:function(){return w}});var t=a(7437),s=a(2265),i=a(8725),n=a(8509),o=a(8728),l=a(7969),c=a(2416),d=a(8670),m=a(9580),u=a(5211),h=a(94),x=a(2235),f=a(2985),g=a(1213);let v=a(3107).Z.create({baseURL:"https://instagram-scraper-api2.p.rapidapi.com/v1.2",headers:{"x-rapidapi-key":"53c70a708bmsh2c3bdfb22325c95p1027fbjsn31b8b6799558","x-rapidapi-host":"instagram-scraper-api2.p.rapidapi.com"}});async function _(e){try{console.log("Fetching reels with params:",e);let r=await v.get("/reels",{params:e});if(console.log("Raw API Response:",JSON.stringify(r.data,null,2)),!r.data)throw Error("Empty response from API");if("fail"===r.data.status)throw Error(r.data.message||"API request failed");if(!r.data.data||!Array.isArray(r.data.data.items))return console.warn("No items found in API response:",r.data),{data:{items:[]}};let a={data:{items:r.data.data.items.map((r,a)=>{var t,s,i,n,o,l,c,d,m;console.log("Processing item ".concat(a,":"),{id:r.id,is_video:r.is_video,video_duration:r.video_duration,has_video_versions:!!r.video_versions,has_image_versions:!!r.image_versions,caption:(null===(t=r.caption)||void 0===t?void 0:t.text)||"No caption"});let u=r.id||r.pk||"reel_".concat(Date.now(),"_").concat(a),h="";r.video_versions&&Array.isArray(r.video_versions)&&r.video_versions.length>0?h=r.video_versions[0].url:r.video_url&&(h=r.video_url);let x="";(null===(s=r.image_versions2)||void 0===s?void 0:s.candidates)&&Array.isArray(r.image_versions2.candidates)&&r.image_versions2.candidates.length>0?x=r.image_versions2.candidates[0].url:(null===(i=r.image_versions)||void 0===i?void 0:i.items)&&Array.isArray(r.image_versions.items)&&r.image_versions.items.length>0?x=r.image_versions.items[0].url:r.thumbnail_url&&(x=r.thumbnail_url);let f={pk:(null===(n=r.user)||void 0===n?void 0:n.id)||(null===(o=r.user)||void 0===o?void 0:o.pk)||"",username:(null===(l=r.user)||void 0===l?void 0:l.username)||e.username_or_id_or_url||"",full_name:(null===(c=r.user)||void 0===c?void 0:c.full_name)||"",profile_pic_url:(null===(d=r.user)||void 0===d?void 0:d.profile_pic_url)||""},g=(null===(m=r.caption)||void 0===m?void 0:m.text)||r.caption_text||"",v=r.view_count||r.play_count||0,_=r.play_count||r.view_count||0,p=r.like_count||0,y=r.comment_count||0,j=r.taken_at||r.device_timestamp||Math.floor(Date.now()/1e3);return{id:String(u),taken_at:j,pk:String(u),media_type:r.media_type||(r.is_video?2:1),code:r.code||"",caption_text:g,video_versions:h?[{type:101,url:h,width:r.original_width||1080,height:r.original_height||1920}]:[],image_versions2:x?{candidates:[{url:x,width:r.original_width||1080,height:r.original_height||1920}]}:void 0,original_width:r.original_width||1080,original_height:r.original_height||1920,view_count:v,play_count:_,like_count:p,comment_count:y,user:f}})}};return console.log("Transformed Data:",JSON.stringify(a,null,2)),console.log("Successfully transformed ".concat(a.data.items.length," items")),a}catch(e){if(console.error("Error fetching reels:",e),e.response){let r=e.response.status,a=e.response.data;if(429===r)throw Error("Rate limit exceeded. Please try again in a few minutes.");if(404===r)throw Error("Instagram user not found. Please check the username and try again.");if(403===r)throw Error("Access denied. The account might be private or restricted.");throw Error("API Error (".concat(r,"): ").concat((null==a?void 0:a.message)||e.message))}if(e.request)throw Error("Network error. Please check your internet connection and try again.");throw Error(e.message||"Failed to fetch Instagram reels")}}var p=a(7985),y=a(6281),j=a(7391),b=a(6288);function w(){let{isSignedIn:e}=(0,i.a)(),r=(0,y.$)(),[a,v]=(0,s.useState)(""),[w,N]=(0,s.useState)(null),[S,k]=(0,s.useState)(!1),[C,E]=(0,s.useState)(null),[Z,z]=(0,s.useState)(!1),[I,A]=(0,s.useState)([]),[P,O]=(0,s.useState)(!1),[D,Y]=(0,s.useState)(""),[T,F]=(0,s.useState)(!0);(0,s.useEffect)(()=>{R()},[r,e]),(0,s.useEffect)(()=>{e&&r&&(0,j.uN)(r).then(()=>{R()})},[e,r]);let R=async()=>{try{F(!0);let e=await (0,j.yy)(r);A(e)}catch(e){console.error("Error loading saved creators:",e),b.toast.error("Failed to load saved creators")}finally{F(!1)}},q=async()=>{if(!a.trim()){E("Please enter an Instagram username");return}try{k(!0),E(null),z(!0);let e=await _({username_or_id_or_url:a.trim(),url_embed_safe:!0});N(e)}catch(e){console.error("Error fetching reels:",e),E(e.message||"Failed to load Instagram reels. Please try again."),N(null)}finally{k(!1)}},L=async e=>{let a=e.replace("@","").trim().toLowerCase();if(a)try{if(await (0,j.w1)(a,r)){b.toast.info("Creator already saved");return}await (0,j.T2)({creator_username:a},r),await R(),b.toast.success("@".concat(a," saved to your creators list"))}catch(e){console.error("Error saving creator:",e),b.toast.error(e.message||"Failed to save creator")}},J=async e=>{try{await (0,j.p1)(e,r),await R(),b.toast.success("@".concat(e," removed from your list"))}catch(e){console.error("Error removing creator:",e),b.toast.error("Failed to remove creator")}},K=e=>{let r=e.replace("@","").toLowerCase();return I.some(e=>e.creator_username===r)},B=async()=>{let e=D.replace("@","").trim().toLowerCase();e&&(await L(e),Y(""),O(!1))},G=async()=>{a.trim()&&await L(a.trim())};return(0,t.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-4",children:[(0,t.jsx)(c.Z,{className:"h-8 w-8 text-pink-500"}),(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Content Creator Search"})]}),(0,t.jsx)("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Search for your favorite food content creators on Instagram and save their cooking reels to your recipe collection."})]}),(0,t.jsxs)(n.Zb,{className:"mb-8",children:[(0,t.jsx)(n.Ol,{children:(0,t.jsxs)(n.ll,{className:"flex items-center gap-2",children:[(0,t.jsx)(d.Z,{className:"h-5 w-5"}),"Search Instagram Creator"]})}),(0,t.jsxs)(n.aY,{children:[(0,t.jsxs)("div",{className:"flex gap-4 mb-4",children:[(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsx)(l.I,{type:"text",placeholder:"Enter Instagram username (e.g., gordonramsay)",value:a,onChange:e=>v(e.target.value),onKeyPress:e=>{"Enter"===e.key&&q()},className:"w-full"})}),(0,t.jsxs)(o.z,{onClick:q,disabled:S||!a.trim(),className:"flex items-center gap-2",children:[S?(0,t.jsx)(m.Z,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)(d.Z,{className:"h-4 w-4"}),S?"Searching...":"Search"]}),a.trim()&&!K(a.trim())&&(0,t.jsxs)(o.z,{variant:"outline",onClick:G,className:"flex items-center gap-2",children:[(0,t.jsx)(u.Z,{className:"h-4 w-4"}),"Save Creator"]})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:"Popular food creators:"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:["gordonramsay","thefoodbabe","tasty","buzzfeedtasty","foodnetwork","jamieoliver","bonappetitmag","seriouseats"].map(e=>(0,t.jsxs)(o.z,{variant:"outline",size:"sm",onClick:()=>v(e),className:"text-xs",children:["@",e]},e))})]}),T?(0,t.jsxs)("div",{className:"flex items-center gap-2 text-gray-500",children:[(0,t.jsx)(m.Z,{className:"h-4 w-4 animate-spin"}),(0,t.jsx)("span",{className:"text-sm",children:"Loading your saved creators..."})]}):I.length>0?(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["Your saved creators (",I.length,"):"]}),(0,t.jsxs)(o.z,{variant:"ghost",size:"sm",onClick:()=>O(!P),className:"text-xs",children:[(0,t.jsx)(h.Z,{className:"h-3 w-3 mr-1"}),"Add Creator"]})]}),P&&(0,t.jsxs)("div",{className:"flex gap-2 mb-3",children:[(0,t.jsx)(l.I,{type:"text",placeholder:"Enter username to save",value:D,onChange:e=>Y(e.target.value),onKeyPress:e=>"Enter"===e.key&&B(),className:"flex-1"}),(0,t.jsx)(o.z,{size:"sm",onClick:B,children:"Add"}),(0,t.jsx)(o.z,{variant:"outline",size:"sm",onClick:()=>{O(!1),Y("")},children:(0,t.jsx)(x.Z,{className:"h-3 w-3"})})]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:I.map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsxs)(o.z,{variant:"secondary",size:"sm",onClick:()=>v(e.creator_username),className:"text-xs pr-1",title:e.creator_display_name||"@".concat(e.creator_username),children:[(0,t.jsx)(u.Z,{className:"h-3 w-3 mr-1 text-red-500 fill-current"}),"@",e.creator_username,e.is_verified&&(0,t.jsx)("span",{className:"ml-1 text-blue-500",children:"✓"})]}),(0,t.jsx)(o.z,{variant:"ghost",size:"sm",onClick:()=>J(e.creator_username),className:"h-6 w-6 p-0 hover:bg-red-100",title:"Remove @".concat(e.creator_username),children:(0,t.jsx)(x.Z,{className:"h-3 w-3 text-red-500"})})]},e.creator_username))})]}):(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsxs)(o.z,{variant:"outline",size:"sm",onClick:()=>O(!P),className:"text-xs",children:[(0,t.jsx)(h.Z,{className:"h-3 w-3 mr-1"}),"Save Your Favorite Creators"]}),P&&(0,t.jsxs)("div",{className:"flex gap-2 mt-3",children:[(0,t.jsx)(l.I,{type:"text",placeholder:"Enter username to save (e.g., gordonramsay)",value:D,onChange:e=>Y(e.target.value),onKeyPress:e=>"Enter"===e.key&&B(),className:"flex-1"}),(0,t.jsx)(o.z,{onClick:B,children:"Add"}),(0,t.jsx)(o.z,{variant:"outline",onClick:()=>{O(!1),Y("")},children:(0,t.jsx)(x.Z,{className:"h-4 w-4"})})]})]})]})]}),e&&(0,t.jsx)(n.Zb,{className:"mb-8 border-green-200 bg-green-50",children:(0,t.jsx)(n.aY,{className:"pt-6",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(u.Z,{className:"h-5 w-5 text-green-600 fill-current"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-green-800 font-medium",children:"Database sync enabled"}),(0,t.jsx)("p",{className:"text-green-700 text-sm",children:"Your saved creators and reels are securely stored and synced across all your devices."})]})]})})}),!e&&(0,t.jsx)(n.Zb,{className:"mb-8 border-amber-200 bg-amber-50",children:(0,t.jsx)(n.aY,{className:"pt-6",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(f.Z,{className:"h-5 w-5 text-amber-600"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-amber-800 font-medium",children:"Sign in for full features"}),(0,t.jsx)("p",{className:"text-amber-700 text-sm",children:"You can search and view reels, but sign in to save creators and reels across devices."})]})]})})}),C&&(0,t.jsx)(n.Zb,{className:"mb-8 border-red-200 bg-red-50",children:(0,t.jsx)(n.aY,{className:"pt-6",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(f.Z,{className:"h-5 w-5 text-red-600"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-red-800 font-medium",children:"Error"}),(0,t.jsx)("p",{className:"text-red-700 text-sm",children:C})]})]})})}),S&&(0,t.jsx)(n.Zb,{children:(0,t.jsx)(n.aY,{className:"pt-6",children:(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(m.Z,{className:"h-8 w-8 animate-spin text-gray-400 mx-auto mb-4"}),(0,t.jsxs)("p",{className:"text-gray-600",children:["Loading reels from @",a,"..."]})]})})})}),!S&&w&&(0,t.jsxs)(n.Zb,{children:[(0,t.jsxs)(n.Ol,{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(g.Z,{className:"h-5 w-5"}),(0,t.jsxs)(n.ll,{children:["Reels from @",a]})]}),!K(a)&&(0,t.jsxs)(o.z,{variant:"outline",size:"sm",onClick:G,className:"flex items-center gap-2",children:[(0,t.jsx)(u.Z,{className:"h-4 w-4"}),"Save Creator"]})]}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:[w.data.items.length," reels found",e&&" • Click the bookmark icon to save reels"]})]}),(0,t.jsx)(n.aY,{children:(0,t.jsx)(p.u,{data:w})})]}),!S&&Z&&w&&0===w.data.items.length&&(0,t.jsx)(n.Zb,{children:(0,t.jsx)(n.aY,{className:"pt-6",children:(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(g.Z,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No reels found"}),(0,t.jsxs)("p",{className:"text-gray-600 mb-4",children:["We couldn't find any reels for @",a,". This could be because:"]}),(0,t.jsxs)("ul",{className:"text-sm text-gray-500 text-left max-w-md mx-auto space-y-1",children:[(0,t.jsx)("li",{children:"• The username doesn't exist"}),(0,t.jsx)("li",{children:"• The account is private"}),(0,t.jsx)("li",{children:"• The account doesn't have any reels"}),(0,t.jsx)("li",{children:"• There was a temporary issue with Instagram"})]})]})})}),!Z&&(0,t.jsxs)(n.Zb,{children:[(0,t.jsx)(n.Ol,{children:(0,t.jsx)(n.ll,{children:"Getting Started"})}),(0,t.jsx)(n.aY,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:"w-6 h-6 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center text-sm font-medium",children:"1"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:"Search for a creator"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Enter an Instagram username in the search box above"})]})]}),(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:"w-6 h-6 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center text-sm font-medium",children:"2"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:"Save your favorite creators"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:'Click "Save Creator" to add them to your personal list'})]})]}),(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:"w-6 h-6 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center text-sm font-medium",children:"3"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:"Browse their reels"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"View cooking videos and recipe content"})]})]}),(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:"w-6 h-6 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center text-sm font-medium",children:"4"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:"Save your favorites"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:e?"Click the bookmark icon to save reels to your collection":"Sign in to save reels to your collection"})]})]})]})})]})]})})}},8728:function(e,r,a){"use strict";a.d(r,{z:function(){return d}});var t=a(7437),s=a(2265),i=a(9143),n=a(9769),o=a(3167),l=a(1367);let c=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,r)=>{let{className:a,variant:s,size:n,asChild:d=!1,...m}=e,u=d?i.g7:"button";return(0,t.jsx)(u,{className:function(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];return(0,l.m6)((0,o.W)(r))}(c({variant:s,size:n,className:a})),ref:r,...m})});d.displayName="Button"},7391:function(e,r,a){"use strict";a.d(r,{T2:function(){return o},p1:function(){return l},uN:function(){return d},w1:function(){return c},yy:function(){return n}});let t="kitchenai_saved_creators";function s(){try{let e=localStorage.getItem(t);return e?JSON.parse(e):[]}catch(e){return console.error("Error reading from localStorage:",e),[]}}function i(e){try{localStorage.setItem(t,JSON.stringify(e))}catch(e){console.error("Error saving to localStorage:",e)}}async function n(e){if(!e)return s().map(e=>({creator_username:e,saved_at:new Date().toISOString()}));try{let{data:{session:r}}=await e.auth.getSession();if(!r)return s().map(e=>({creator_username:e,saved_at:new Date().toISOString()}));let{data:a,error:t}=await e.from("saved_creators").select("*").eq("user_id",r.user.id).order("saved_at",{ascending:!1});if(t)throw t;return a.map(e=>({id:e.id,creator_username:e.creator_username,creator_display_name:e.creator_display_name,creator_profile_pic_url:e.creator_profile_pic_url,creator_follower_count:e.creator_follower_count,creator_bio:e.creator_bio,is_verified:e.is_verified,saved_at:e.saved_at}))}catch(e){return console.warn("Database error, falling back to localStorage:",e),s().map(e=>({creator_username:e,saved_at:new Date().toISOString()}))}}async function o(e,r){let a={creator_username:e.creator_username,creator_display_name:e.creator_display_name,creator_profile_pic_url:e.creator_profile_pic_url,creator_follower_count:e.creator_follower_count,creator_bio:e.creator_bio,is_verified:e.is_verified||!1,saved_at:new Date().toISOString()};if(!r){let r=s();return r.includes(e.creator_username)||(r.push(e.creator_username),i(r)),a}try{let{data:{session:t}}=await r.auth.getSession();if(!t){let r=s();return r.includes(e.creator_username)||(r.push(e.creator_username),i(r)),a}let{data:n,error:o}=await r.from("saved_creators").insert({user_id:t.user.id,creator_username:e.creator_username,creator_display_name:e.creator_display_name,creator_profile_pic_url:e.creator_profile_pic_url,creator_follower_count:e.creator_follower_count,creator_bio:e.creator_bio,is_verified:e.is_verified||!1}).select().single();if(o){if("23505"===o.code)throw Error("Creator already saved");throw o}return{id:n.id,creator_username:n.creator_username,creator_display_name:n.creator_display_name,creator_profile_pic_url:n.creator_profile_pic_url,creator_follower_count:n.creator_follower_count,creator_bio:n.creator_bio,is_verified:n.is_verified,saved_at:n.saved_at}}catch(t){console.warn("Database error, falling back to localStorage:",t);let r=s();return r.includes(e.creator_username)||(r.push(e.creator_username),i(r)),a}}async function l(e,r){if(!r){i(s().filter(r=>r!==e));return}try{let{data:{session:a}}=await r.auth.getSession();if(!a){let r=s().filter(r=>r!==e);i(r);return}let{error:t}=await r.from("saved_creators").delete().eq("user_id",a.user.id).eq("creator_username",e);if(t)throw t}catch(r){console.warn("Database error, falling back to localStorage:",r),i(s().filter(r=>r!==e))}}async function c(e,r){if(!r)return s().includes(e);try{let{data:{session:a}}=await r.auth.getSession();if(!a)return s().includes(e);let{data:t,error:i}=await r.from("saved_creators").select("id").eq("user_id",a.user.id).eq("creator_username",e).single();if(i&&"PGRST116"!==i.code)throw i;return!!t}catch(r){return console.warn("Database error, falling back to localStorage:",r),s().includes(e)}}async function d(e){try{let{data:{session:r}}=await e.auth.getSession();if(!r)return;let a=s();if(0===a.length)return;let i=(await n(e)).map(e=>e.creator_username),l=a.filter(e=>!i.includes(e));for(let r of l)try{await o({creator_username:r},e)}catch(e){console.warn("Failed to migrate creator ".concat(r,":"),e)}l.length>0&&(localStorage.removeItem(t),console.log("Migrated ".concat(l.length," creators from localStorage to database")))}catch(e){console.error("Error migrating localStorage data:",e)}}}},function(e){e.O(0,[51,150,429,37,115,224,971,69,744],function(){return e(e.s=1093)}),_N_E=e.O()}]);