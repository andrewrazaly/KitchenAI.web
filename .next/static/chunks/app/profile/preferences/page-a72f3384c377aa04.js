(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[399],{1294:function(e,r,t){Promise.resolve().then(t.bind(t,777))},4414:function(e,r,t){"use strict";t.d(r,{JB:function(){return l},lm:function(){return o}});var n=t(7437),s=t(2265);function a(e){let{message:r,type:t="info",duration:a=3e3,onClose:i}=e,[l,o]=(0,s.useState)(!0),[c,u]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let e=setTimeout(()=>{d()},a);return()=>clearTimeout(e)},[a,i]);let d=()=>{u(!0),setTimeout(()=>{o(!1),i&&i()},300)};return l?(0,n.jsx)("div",{className:"fixed bottom-20 right-4 z-50 max-w-md",children:(0,n.jsxs)("div",{className:"".concat((()=>{switch(t){case"success":return"bg-green-100 text-green-800 border-green-400";case"error":return"bg-red-100 text-red-800 border-red-400";default:return"bg-blue-100 text-blue-800 border-blue-400"}})()," px-4 py-3 rounded border flex items-center shadow-lg ").concat(c?"animate-fade-out":"animate-fade-in"),children:[(0,n.jsxs)("div",{className:"mr-2",children:["success"===t&&(0,n.jsx)("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"error"===t&&(0,n.jsx)("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),"info"===t&&(0,n.jsx)("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v4a1 1 0 102 0V7zm-1-5a1 1 0 100 2h.01a1 1 0 100-2H10z",clipRule:"evenodd"})})]}),(0,n.jsx)("span",{children:r}),(0,n.jsx)("button",{onClick:d,className:"ml-auto text-gray-600 hover:text-gray-800",children:(0,n.jsx)("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})}):null}let i=(0,s.createContext)(null);function l(e){let{children:r}=e,[t,l]=(0,s.useState)([]);return(0,n.jsxs)(i.Provider,{value:{showNotification:function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",t=Date.now().toString();l(n=>[...n,{id:t,message:e,type:r}]),setTimeout(()=>{l(e=>e.filter(e=>e.id!==t))},3e3)}},children:[r,t.map(e=>(0,n.jsx)(a,{message:e.message,type:e.type,onClose:()=>l(r=>r.filter(r=>r.id!==e.id))},e.id))]})}function o(){let e=(0,s.useContext)(i);if(!e)throw Error("useNotification must be used within a NotificationProvider");return e}},6091:function(e,r,t){"use strict";t.d(r,{z:function(){return i}});var n=t(7437),s=t(2265),a=t(3933);let i=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)("button",{className:(0,a.cn)("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors","focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring","disabled:pointer-events-none disabled:opacity-50","bg-primary text-primary-foreground shadow hover:bg-primary/90","h-9 px-4 py-2",t),ref:r,...s})});i.displayName="Button"},8509:function(e,r,t){"use strict";t.d(r,{Ol:function(){return l},Zb:function(){return i},aY:function(){return c},ll:function(){return o}});var n=t(7437),s=t(2265),a=t(3933);let i=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)("div",{ref:r,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...s})});i.displayName="Card";let l=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)("div",{ref:r,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",t),...s})});l.displayName="CardHeader";let o=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)("h3",{ref:r,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",t),...s})});o.displayName="CardTitle",s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)("p",{ref:r,className:(0,a.cn)("text-sm text-muted-foreground",t),...s})}).displayName="CardDescription";let c=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)("div",{ref:r,className:(0,a.cn)("p-6 pt-0",t),...s})});c.displayName="CardContent",s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)("div",{ref:r,className:(0,a.cn)("flex items-center p-6 pt-0",t),...s})}).displayName="CardFooter"},7969:function(e,r,t){"use strict";t.d(r,{I:function(){return i}});var n=t(7437),s=t(2265),a=t(3933);let i=s.forwardRef((e,r)=>{let{className:t,type:s,...i}=e;return(0,n.jsx)("input",{type:s,className:(0,a.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors","file:border-0 file:bg-transparent file:text-sm file:font-medium","placeholder:text-muted-foreground","focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring","disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...i})});i.displayName="Input"},8725:function(e,r,t){"use strict";t.d(r,{a:function(){return a}});var n=t(2265),s=t(6281);function a(){let e=(0,s.$)(),[r,t]=(0,n.useState)({user:null,session:null,loading:!0,error:null});(0,n.useEffect)(()=>{if(!e)return;(async()=>{try{var r;let{data:{session:n},error:s}=await e.auth.getSession();t({user:null!==(r=null==n?void 0:n.user)&&void 0!==r?r:null,session:n,loading:!1,error:s})}catch(e){t({user:null,session:null,loading:!1,error:e})}})();let{data:{subscription:r}}=e.auth.onAuthStateChange(async(e,r)=>{var n;t({user:null!==(n=null==r?void 0:r.user)&&void 0!==n?n:null,session:r,loading:!1,error:null})});return()=>r.unsubscribe()},[e]);let a=async(r,t)=>{if(!e)return{error:Error("Supabase not initialized")};let{data:n,error:s}=await e.auth.signInWithPassword({email:r,password:t});return{data:n,error:s}},i=async(r,t)=>{if(!e)return{error:Error("Supabase not initialized")};let{data:n,error:s}=await e.auth.signUp({email:r,password:t});return{data:n,error:s}},l=async()=>{if(!e)return{error:Error("Supabase not initialized")};let{error:r}=await e.auth.signOut();return{error:r}},o=async r=>{if(!e)return{error:Error("Supabase not initialized")};let{data:t,error:n}=await e.auth.signInWithOtp({email:r,options:{emailRedirectTo:"".concat(window.location.origin,"/auth/callback")}});return{data:t,error:n}};return{user:r.user,session:r.session,loading:r.loading,error:r.error,isSignedIn:!!r.user,signIn:a,signUp:i,signOut:l,signInWithMagicLink:o}}},6281:function(e,r,t){"use strict";t.d(r,{$:function(){return a}});var n=t(2265),s=t(5876);function a(){let e=(0,n.useContext)(s.Wx);if(!e)throw Error("useSupabase must be used within a SupabaseProvider");return e}},3933:function(e,r,t){"use strict";t.d(r,{cn:function(){return a}});var n=t(3167),s=t(1367);function a(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,s.m6)((0,n.W)(r))}},777:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return x}});var n=t(7437),s=t(2265),a=t(7907),i=t(8725),l=t(8509),o=t(6091),c=t(7969),u=t(3879),d=t(8441);let m=(0,t(7977).Z)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var f=t(4414),h=t(6281);function x(){let{loading:e,isSignedIn:r}=(0,i.a)(),{showNotification:t}=(0,f.lm)(),x=(0,h.$)(),g=(0,a.useRouter)(),[p,b]=(0,s.useState)({dietaryRestrictions:[],cuisinePreferences:[],skillLevel:"beginner",timeConstraints:30,budgetPerWeek:100,nutritionGoals:{calories:2e3,protein:150,carbs:250,fat:65},householdSize:1}),[v,j]=(0,s.useState)(!0),[y,N]=(0,s.useState)(!1);(0,s.useEffect)(()=>{!e&&r?w():e||r||g.push("/signin")},[e,r]);let w=async()=>{try{j(!0);let e=localStorage.getItem("mealPlannerPreferences");if(e)try{let r=JSON.parse(e);b(r)}catch(e){console.log("Error parsing local preferences:",e)}try{let{data:{session:e}}=await x.auth.getSession();if(e){let{data:r}=await x.from("user_preferences").select("*").eq("user_id",e.user.id).single();r&&b(r)}}catch(e){console.log("Supabase not available, using local storage:",e)}}catch(e){console.error("Error loading preferences:",e)}finally{j(!1)}},k=async()=>{try{N(!0),localStorage.setItem("mealPlannerPreferences",JSON.stringify(p));try{let{data:{session:e}}=await x.auth.getSession();if(e){let{error:r}=await x.from("user_preferences").upsert({user_id:e.user.id,...p});if(r)throw r;t("Preferences saved successfully!","success")}else t("Preferences saved locally!","success")}catch(e){console.log("Supabase save failed, but saved locally:",e),t("Preferences saved locally!","success")}}catch(e){console.error("Error saving preferences:",e),t("Error saving preferences. Please try again.","error")}finally{N(!1)}};return e||v?(0,n.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,n.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"animate-spin h-8 w-8 border-2 border-indigo-600 border-t-transparent rounded-full mx-auto mb-4"}),(0,n.jsx)("p",{className:"text-gray-600",children:"Loading preferences..."})]})})}):(0,n.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,n.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,n.jsxs)("div",{className:"flex items-center mb-8",children:[(0,n.jsxs)(o.z,{onClick:()=>g.back(),className:"mr-4",children:[(0,n.jsx)(u.Z,{className:"h-4 w-4 mr-2"}),"Back"]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-3xl font-bold",children:"Meal Planning Preferences"}),(0,n.jsx)("p",{className:"text-gray-600",children:"Customize your meal planning experience"})]})]}),(0,n.jsxs)(l.Zb,{children:[(0,n.jsx)(l.Ol,{children:(0,n.jsxs)(l.ll,{className:"flex items-center gap-2",children:[(0,n.jsx)(d.Z,{className:"h-5 w-5"}),"Your Preferences"]})}),(0,n.jsxs)(l.aY,{className:"space-y-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Household size"}),(0,n.jsxs)("select",{value:p.householdSize,onChange:e=>b({...p,householdSize:Number(e.target.value)}),className:"w-full p-2 border rounded-md",children:[(0,n.jsx)("option",{value:1,children:"Just me"}),(0,n.jsx)("option",{value:2,children:"2 people"}),(0,n.jsx)("option",{value:3,children:"3 people"}),(0,n.jsx)("option",{value:4,children:"4+ people"})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Cooking skill level"}),(0,n.jsx)("div",{className:"grid grid-cols-3 gap-2",children:["beginner","intermediate","advanced"].map(e=>(0,n.jsx)("button",{onClick:()=>b({...p,skillLevel:e}),className:"p-3 rounded-md border text-center capitalize ".concat(p.skillLevel===e?"bg-indigo-100 border-indigo-500 text-indigo-700":"bg-white border-gray-200"),children:e},e))})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Weekly budget ($)"}),(0,n.jsx)(c.I,{type:"number",value:p.budgetPerWeek,onChange:e=>b({...p,budgetPerWeek:Number(e.target.value)}),placeholder:"100"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Maximum cooking time per meal (minutes)"}),(0,n.jsx)(c.I,{type:"number",value:p.timeConstraints,onChange:e=>b({...p,timeConstraints:Number(e.target.value)}),placeholder:"30"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Dietary restrictions"}),(0,n.jsx)("div",{className:"grid grid-cols-2 gap-2",children:["Vegetarian","Vegan","Gluten-free","Dairy-free","Keto","Paleo"].map(e=>(0,n.jsx)("button",{onClick:()=>{let r=p.dietaryRestrictions,t=r.includes(e)?r.filter(r=>r!==e):[...r,e];b({...p,dietaryRestrictions:t})},className:"p-2 rounded-md border text-sm ".concat(p.dietaryRestrictions.includes(e)?"bg-indigo-100 border-indigo-500 text-indigo-700":"bg-white border-gray-200"),children:e},e))})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Favorite cuisines"}),(0,n.jsx)("div",{className:"grid grid-cols-2 gap-2",children:["Italian","Mexican","Asian","Mediterranean","American","Indian","Thai","French"].map(e=>(0,n.jsx)("button",{onClick:()=>{let r=p.cuisinePreferences,t=r.includes(e)?r.filter(r=>r!==e):[...r,e];b({...p,cuisinePreferences:t})},className:"p-2 rounded-md border text-sm ".concat(p.cuisinePreferences.includes(e)?"bg-green-100 border-green-500 text-green-700":"bg-white border-gray-200"),children:e},e))})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Daily nutrition goals"}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"Calories"}),(0,n.jsx)(c.I,{type:"number",value:p.nutritionGoals.calories,onChange:e=>b({...p,nutritionGoals:{...p.nutritionGoals,calories:Number(e.target.value)}})})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"Protein (g)"}),(0,n.jsx)(c.I,{type:"number",value:p.nutritionGoals.protein,onChange:e=>b({...p,nutritionGoals:{...p.nutritionGoals,protein:Number(e.target.value)}})})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"Carbs (g)"}),(0,n.jsx)(c.I,{type:"number",value:p.nutritionGoals.carbs,onChange:e=>b({...p,nutritionGoals:{...p.nutritionGoals,carbs:Number(e.target.value)}})})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"Fat (g)"}),(0,n.jsx)(c.I,{type:"number",value:p.nutritionGoals.fat,onChange:e=>b({...p,nutritionGoals:{...p.nutritionGoals,fat:Number(e.target.value)}})})]})]})]}),(0,n.jsx)(o.z,{onClick:k,className:"w-full",disabled:y,children:y?(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("div",{className:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full"}),"Saving..."]}):(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(m,{className:"h-4 w-4"}),"Save Preferences"]})})]})]})]})})}},5876:function(e,r,t){"use strict";t.d(r,{FV:function(){return l},Wx:function(){return i}});var n=t(7437),s=t(2265),a=t(1051);let i=(0,s.createContext)(null);function l(e){let{children:r}=e,[t]=(0,s.useState)(()=>(0,a.eI)("https://wofujmjtywidyilhfewn.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndvZnVqbWp0eXdpZHlpbGhmZXduIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDczNTkwNDEsImV4cCI6MjA2MjkzNTA0MX0.RO5x9h_QEzNFbyiMqphMuqYDChd-KQ9Cf3ODvP_RzO4"));return(0,n.jsx)(i.Provider,{value:t,children:r})}},7977:function(e,r,t){"use strict";t.d(r,{Z:function(){return d}});var n=t(2265);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),a=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,t)=>t?t.toUpperCase():r.toLowerCase()),i=e=>{let r=a(e);return r.charAt(0).toUpperCase()+r.slice(1)},l=(...e)=>e.filter((e,r,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===r).join(" ").trim(),o=e=>{for(let r in e)if(r.startsWith("aria-")||"role"===r||"title"===r)return!0};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let u=(0,n.forwardRef)(({color:e="currentColor",size:r=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:a="",children:i,iconNode:u,...d},m)=>(0,n.createElement)("svg",{ref:m,...c,width:r,height:r,stroke:e,strokeWidth:s?24*Number(t)/Number(r):t,className:l("lucide",a),...!i&&!o(d)&&{"aria-hidden":"true"},...d},[...u.map(([e,r])=>(0,n.createElement)(e,r)),...Array.isArray(i)?i:[i]])),d=(e,r)=>{let t=(0,n.forwardRef)(({className:t,...a},o)=>(0,n.createElement)(u,{ref:o,iconNode:r,className:l(`lucide-${s(i(e))}`,`lucide-${e}`,t),...a}));return t.displayName=i(e),t}},3879:function(e,r,t){"use strict";t.d(r,{Z:function(){return n}});let n=(0,t(7977).Z)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},8441:function(e,r,t){"use strict";t.d(r,{Z:function(){return n}});let n=(0,t(7977).Z)("chef-hat",[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]])},7907:function(e,r,t){"use strict";var n=t(5313);t.o(n,"useParams")&&t.d(r,{useParams:function(){return n.useParams}}),t.o(n,"usePathname")&&t.d(r,{usePathname:function(){return n.usePathname}}),t.o(n,"useRouter")&&t.d(r,{useRouter:function(){return n.useRouter}})}},function(e){e.O(0,[51,150,971,69,744],function(){return e(e.s=1294)}),_N_E=e.O()}]);