"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[224],{6091:function(e,t,r){r.d(t,{z:function(){return i}});var a=r(7437),s=r(2265),n=r(3933);let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("button",{className:(0,n.cn)("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors","focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring","disabled:pointer-events-none disabled:opacity-50","bg-primary text-primary-foreground shadow hover:bg-primary/90","h-9 px-4 py-2",r),ref:t,...s})});i.displayName="Button"},8509:function(e,t,r){r.d(t,{Ol:function(){return l},Zb:function(){return i},aY:function(){return c},ll:function(){return o}});var a=r(7437),s=r(2265),n=r(3933);let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});i.displayName="Card";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...s})});l.displayName="CardHeader";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});o.displayName="CardTitle",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...s})}).displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...s})});c.displayName="CardContent",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...s})}).displayName="CardFooter"},7969:function(e,t,r){r.d(t,{I:function(){return i}});var a=r(7437),s=r(2265),n=r(3933);let i=s.forwardRef((e,t)=>{let{className:r,type:s,...i}=e;return(0,a.jsx)("input",{type:s,className:(0,n.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors","file:border-0 file:bg-transparent file:text-sm file:font-medium","placeholder:text-muted-foreground","focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring","disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...i})});i.displayName="Input"},8725:function(e,t,r){r.d(t,{a:function(){return n}});var a=r(2265),s=r(6281);function n(){let e=(0,s.$)(),[t,r]=(0,a.useState)({user:null,session:null,loading:!0,error:null});(0,a.useEffect)(()=>{if(!e)return;(async()=>{try{var t;let{data:{session:a},error:s}=await e.auth.getSession();r({user:null!==(t=null==a?void 0:a.user)&&void 0!==t?t:null,session:a,loading:!1,error:s})}catch(e){r({user:null,session:null,loading:!1,error:e})}})();let{data:{subscription:t}}=e.auth.onAuthStateChange(async(e,t)=>{var a;r({user:null!==(a=null==t?void 0:t.user)&&void 0!==a?a:null,session:t,loading:!1,error:null})});return()=>t.unsubscribe()},[e]);let n=async(t,r)=>{if(!e)return{error:Error("Supabase not initialized")};let{data:a,error:s}=await e.auth.signInWithPassword({email:t,password:r});return{data:a,error:s}},i=async(t,r)=>{if(!e)return{error:Error("Supabase not initialized")};let{data:a,error:s}=await e.auth.signUp({email:t,password:r});return{data:a,error:s}},l=async()=>{if(!e)return{error:Error("Supabase not initialized")};let{error:t}=await e.auth.signOut();return{error:t}},o=async t=>{if(!e)return{error:Error("Supabase not initialized")};let{data:r,error:a}=await e.auth.signInWithOtp({email:t,options:{emailRedirectTo:"".concat(window.location.origin,"/auth/callback")}});return{data:r,error:a}};return{user:t.user,session:t.session,loading:t.loading,error:t.error,isSignedIn:!!t.user,signIn:n,signUp:i,signOut:l,signInWithMagicLink:o}}},6281:function(e,t,r){r.d(t,{$:function(){return n}});var a=r(2265),s=r(5876);function n(){let e=(0,a.useContext)(s.Wx);if(!e)throw Error("useSupabase must be used within a SupabaseProvider");return e}},3933:function(e,t,r){r.d(t,{cn:function(){return n}});var a=r(3167),s=r(1367);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,a.W)(t))}},5876:function(e,t,r){r.d(t,{FV:function(){return l},Wx:function(){return i}});var a=r(7437),s=r(2265),n=r(1051);let i=(0,s.createContext)(null);function l(e){let{children:t}=e,[r]=(0,s.useState)(()=>(0,n.eI)("https://wofujmjtywidyilhfewn.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndvZnVqbWp0eXdpZHlpbGhmZXduIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDczNTkwNDEsImV4cCI6MjA2MjkzNTA0MX0.RO5x9h_QEzNFbyiMqphMuqYDChd-KQ9Cf3ODvP_RzO4"));return(0,a.jsx)(i.Provider,{value:r,children:t})}},7985:function(e,t,r){r.d(t,{u:function(){return z}});var a=r(7437),s=r(8509),n=r(6210),i=r(3081),l=r(1562),o=r(9251),c=r(8950),d=r(5323),u=r(7841),f=r(5211),m=r(7366),p=r(2265),h=r(590),v=r(6281),x=r(6288);function g(e){var t,r,g;let{reel:w}=e,y=(0,v.$)(),[b,N]=(0,p.useState)(!1),[j,_]=(0,p.useState)(!0),[k,S]=(0,p.useState)(!1),[C,I]=(0,p.useState)(!1),[Z,R]=(0,p.useState)(!1),z=(0,p.useRef)(null);(0,p.useEffect)(()=>{(async()=>{try{let e=await (0,h.fy)(w.id,y);I(e)}catch(e){console.error("Error checking saved status:",e)}})()},[w.id,y]);let E=e=>(e||0).toLocaleString(),D=()=>{z.current&&(b?z.current.pause():z.current.play(),N(!b))},M=async e=>{if(e.stopPropagation(),!Z){R(!0);try{C?(await (0,h.aX)(w.id,y),I(!1),x.toast.success("Reel removed from saved items")):(await (0,h.UD)(w,y),I(!0),x.toast.success("Reel saved successfully"))}catch(e){x.toast.error(e.message||"Failed to save reel")}finally{R(!1)}}},O=(null===(t=w.video_versions)||void 0===t?void 0:t.length)?w.video_versions[0].url:"";return(0,a.jsxs)(s.Zb,{className:"overflow-hidden",children:[(0,a.jsxs)("div",{className:"relative aspect-[9/16] w-full bg-black cursor-pointer group",onClick:D,onMouseEnter:()=>S(!0),onMouseLeave:()=>S(!1),children:[(0,a.jsx)("video",{ref:z,src:O,poster:(null===(g=w.image_versions2)||void 0===g?void 0:null===(r=g.candidates)||void 0===r?void 0:r.length)?w.image_versions2.candidates[0].url:"",className:"w-full h-full object-contain",muted:j,onEnded:()=>{N(!1),z.current&&(z.current.currentTime=0)},playsInline:!0}),(0,a.jsx)("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center transition-opacity ".concat(k||!b?"opacity-100":"opacity-0"),children:(0,a.jsx)("button",{onClick:D,className:"text-white p-4 rounded-full hover:bg-white/20 transition-colors",children:b?(0,a.jsx)(n.Z,{className:"h-12 w-12"}):(0,a.jsx)(i.Z,{className:"h-12 w-12"})})}),(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),z.current&&(z.current.muted=!j,_(!j))},className:"absolute bottom-4 right-4 text-white p-2 rounded-full hover:bg-white/20 transition-colors ".concat(k?"opacity-100":"opacity-0"),children:j?(0,a.jsx)(l.Z,{className:"h-6 w-6"}):(0,a.jsx)(o.Z,{className:"h-6 w-6"})})]}),(0,a.jsxs)(s.aY,{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("img",{src:w.user.profile_pic_url,alt:w.user.username,className:"w-6 h-6 rounded-full"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:w.user.username})]}),(0,a.jsx)("button",{onClick:M,className:"flex items-center gap-1 px-3 py-1 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors ".concat(Z?"opacity-50 cursor-not-allowed":""),disabled:Z,children:C?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"text-sm",children:"Saved"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"text-sm",children:"Save"})]})})]}),w.caption_text&&(0,a.jsx)("p",{className:"text-sm line-clamp-2 mb-2",children:w.caption_text}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(u.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:E(w.view_count)})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(i.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:E(w.play_count)})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(f.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:E(w.like_count)})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(m.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:E(w.comment_count)})]})]}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground mt-2",children:(e=>{try{let t=new Date(1e3*e),r=new Date,a=Math.abs(r.getTime()-t.getTime()),s=Math.ceil(a/864e5);if(s<1)return"Today";if(1===s)return"Yesterday";if(s<7)return"".concat(s," days ago");if(s<30)return"".concat(Math.floor(s/7)," weeks ago");if(s<365)return"".concat(Math.floor(s/30)," months ago");return"".concat(Math.floor(s/365)," years ago")}catch(e){return"Recently"}})(w.taken_at)})]})]})}var w=r(2616),y=r(3441),b=r(9259),N=r(3933);let j=w.fC;w.ZA;let _=w.B4,k=p.forwardRef((e,t)=>{let{className:r,children:s,...n}=e;return(0,a.jsxs)(w.xz,{ref:t,className:(0,N.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),...n,children:[s,(0,a.jsx)(y.Z,{className:"h-4 w-4 opacity-50"})]})});k.displayName=w.xz.displayName;let S=p.forwardRef((e,t)=>{let{className:r,children:s,position:n="popper",...i}=e;return(0,a.jsx)(w.h_,{children:(0,a.jsx)(w.VY,{ref:t,className:(0,N.cn)("relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:n,...i,children:(0,a.jsx)(w.l_,{className:(0,N.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s})})})});S.displayName=w.VY.displayName,p.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(w.__,{ref:t,className:(0,N.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",r),...s})}).displayName=w.__.displayName;let C=p.forwardRef((e,t)=>{let{className:r,children:s,...n}=e;return(0,a.jsxs)(w.ck,{ref:t,className:(0,N.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...n,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(w.wU,{children:(0,a.jsx)(b.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(w.eT,{children:s})]})});C.displayName=w.ck.displayName,p.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(w.Z0,{ref:t,className:(0,N.cn)("-mx-1 my-1 h-px bg-muted",r),...s})}).displayName=w.Z0.displayName;var I=r(6091),Z=r(9681),R=r(3505);function z(e){var t,r;let{data:s}=e,[n,i]=(0,p.useState)("taken_at"),[l,o]=(0,p.useState)("desc"),c=(e,t)=>{if("taken_at"===t)return e.taken_at||0;let r=e[t];if("number"==typeof r)return r;if("view_count"===t){let t=[e.view_count,e.play_count].find(e=>"number"==typeof e);if("number"==typeof t)return t}return 0},d=(0,p.useMemo)(()=>{var e,t;return(null==s?void 0:null===(t=s.data)||void 0===t?void 0:null===(e=t.items)||void 0===e?void 0:e.length)?[...s.data.items].sort((e,t)=>{let r=c(e,n),a=c(t,n);return"asc"===l?r-a:a-r}):[]},[s,n,l]);return(null==s?void 0:null===(r=s.data)||void 0===r?void 0:null===(t=r.items)||void 0===t?void 0:t.length)?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 pb-4",children:[(0,a.jsxs)(j,{value:n,onValueChange:e=>i(e),children:[(0,a.jsx)(k,{className:"w-[180px]",children:(0,a.jsx)(_,{placeholder:"Sort by..."})}),(0,a.jsx)(S,{children:[{value:"taken_at",label:"Date Posted"},{value:"view_count",label:"Views"},{value:"play_count",label:"Plays"},{value:"like_count",label:"Likes"},{value:"comment_count",label:"Comments"}].map(e=>(0,a.jsx)(C,{value:e.value,children:e.label},e.value))})]}),(0,a.jsx)(I.z,{onClick:()=>{o(e=>"asc"===e?"desc":"asc")},className:"h-10 w-10",children:"asc"===l?(0,a.jsx)(Z.Z,{className:"h-4 w-4"}):(0,a.jsx)(R.Z,{className:"h-4 w-4"})}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:[d.length," reels"]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:d.map(e=>(0,a.jsx)(g,{reel:e},e.id))})]}):(0,a.jsx)("div",{className:"text-center text-muted-foreground p-8",children:"No reels found"})}},590:function(e,t,r){r.d(t,{UD:function(){return o},aX:function(){return c},bH:function(){return l},fy:function(){return d},zP:function(){return u}});let a="saved_reels";function s(){let e=localStorage.getItem(a);return e?JSON.parse(e):[]}function n(e){localStorage.setItem(a,JSON.stringify(e))}function i(e){var t,r,a,s,n,i,l,o,c;return{...JSON.parse(e.reel_data),savedAt:new Date(e.saved_at).getTime(),notes:e.notes,recipeId:e.recipe_id,recipeName:null===(t=e.recipes)||void 0===t?void 0:t.title,recipeDescription:null===(r=e.recipes)||void 0===r?void 0:r.description,ingredients:null===(a=e.recipes)||void 0===a?void 0:a.ingredients,instructions:null===(s=e.recipes)||void 0===s?void 0:s.instructions,cookingTime:(null===(n=e.recipes)||void 0===n?void 0:n.cook_time)?"".concat(e.recipes.cook_time," minutes"):void 0,servings:null===(i=e.recipes)||void 0===i?void 0:i.servings,difficulty:null===(l=e.recipes)||void 0===l?void 0:l.difficulty,cuisine:null===(o=e.recipes)||void 0===o?void 0:o.cuisine,tags:null===(c=e.recipes)||void 0===c?void 0:c.tags}}async function l(e){if(!e)return s();try{let{data:t,error:r}=await e.from("saved_reels").select("*, recipes(*)").order("saved_at",{ascending:!1});if(r)throw r;return t.map(i)}catch(e){return console.warn("Falling back to localStorage:",e),s()}}async function o(e,t){let r={...e,savedAt:Date.now()};if(!t){let t=s();if(t.some(t=>t.id===e.id))throw Error("Reel already saved");return t.push(r),n(t),r}try{let{data:{session:r}}=await t.auth.getSession();if(!r)throw Error("Not authenticated");let{error:a}=await t.from("saved_reels").insert({user_id:r.user.id,reel_id:e.id,reel_data:JSON.stringify(e),saved_at:new Date().toISOString()});if(a)throw a}catch(a){console.warn("Falling back to localStorage:",a);let t=s();if(t.some(t=>t.id===e.id))throw Error("Reel already saved");t.push(r),n(t)}return r}async function c(e,t){if(!t){n(s().filter(t=>t.id!==e));return}try{let{error:r}=await t.from("saved_reels").delete().eq("reel_id",e);if(r)throw r}catch(t){console.warn("Falling back to localStorage:",t),n(s().filter(t=>t.id!==e))}}async function d(e,t){if(!t)return s().some(t=>t.id===e);try{let{data:r,error:a}=await t.from("saved_reels").select("id").eq("reel_id",e).single();if(a)throw a;return!!r}catch(t){return console.warn("Falling back to localStorage:",t),s().some(t=>t.id===e)}}async function u(e){if(!e)return s().filter(e=>e.recipeName);try{let{data:t,error:r}=await e.from("saved_reels").select("*, recipes(*)").not("recipe_id","is",null).order("saved_at",{ascending:!1});if(r)throw r;return t.map(i)}catch(e){return console.warn("Falling back to localStorage:",e),s().filter(e=>e.recipeName)}}}}]);