"use strict";(()=>{var e={};e.id=1442,e.ids=[1442],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},14300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},82361:e=>{e.exports=require("events")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},41808:e=>{e.exports=require("net")},85477:e=>{e.exports=require("punycode")},12781:e=>{e.exports=require("stream")},24404:e=>{e.exports=require("tls")},57310:e=>{e.exports=require("url")},59796:e=>{e.exports=require("zlib")},92459:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>T,originalPathname:()=>P,patchFetch:()=>S,requestAsyncStorage:()=>x,routeModule:()=>w,serverHooks:()=>v,staticGenerationAsyncStorage:()=>C,staticGenerationBailout:()=>q});var n={};r.r(n),r.d(n,{POST:()=>c});var i=r(95419),a=r(69108),s=r(99678),o=r(98984),l=r(57699),u=r(7439);async function c(e){try{let t=(0,l.createRouteHandlerClient)({cookies:u.cookies}),{data:{session:r}}=await t.auth.getSession();if(!r?.user)return o.NextResponse.json({message:"Unauthorized"},{status:401});let{originalPlan:n,modificationType:i,newValue:a,preferences:s}=await e.json();if(!n||!i)return o.NextResponse.json({message:"Missing required parameters"},{status:400});let c=JSON.parse(JSON.stringify(n));switch(i){case"replace_meal":c=await d(c,a);break;case"change_cuisine":c=await p(c,a,s);break;case"add_restriction":c=await f(c,a,s);break;case"adjust_budget":c=await m(c,a,s);break;default:return o.NextResponse.json({message:"Invalid modification type"},{status:400})}return c.name=`Modified ${n.name}`,c.id=`plan_${Date.now()}`,o.NextResponse.json({success:!0,mealPlan:c,message:"Meal plan modified successfully"})}catch(e){return console.error("Error modifying meal plan:",e),o.NextResponse.json({message:"Failed to modify meal plan",error:e instanceof Error?e.message:"Unknown error"},{status:500})}}async function d(e,t){let r=t.match(/(monday|tuesday|wednesday|thursday|friday|saturday|sunday|day\s*(\d+))/i),n=t.match(/(breakfast|lunch|dinner)/i);if(!r||!n)return e.meals&&e.meals.length>0&&(e.meals[0].breakfast=g("breakfast")),e;let i=n[1].toLowerCase(),a=0;return a=r[2]?parseInt(r[2])-1:["monday","tuesday","wednesday","thursday","friday","saturday","sunday"].indexOf(r[1].toLowerCase()),e.meals&&e.meals[a]&&(e.meals[a][i]=g(i)),e}async function p(e,t,r){if(!e.meals)return e;for(let r of e.meals)r.breakfast=h("breakfast",t),r.lunch=h("lunch",t),r.dinner=h("dinner",t);return e}async function f(e,t,r){if(!e.meals)return e;for(let r of e.meals)r.breakfast=y(r.breakfast,t),r.lunch=y(r.lunch,t),r.dinner=y(r.dinner,t);return e}async function m(e,t,r){let n=t.match(/\$?(\d+)/),i=n?parseInt(n[1]):100;if(!e.meals)return e;let a=i<75,s=i>150;for(let t of e.meals)a?(t.breakfast=k(t.breakfast),t.lunch=k(t.lunch),t.dinner=k(t.dinner)):s&&(t.breakfast=b(t.breakfast),t.lunch=b(t.lunch),t.dinner=b(t.dinner));return e}function g(e){let t={breakfast:[{title:"Avocado Toast with Poached Egg",ingredients:["Whole grain bread","Avocado","Eggs","Lemon","Salt","Pepper"],prepTime:15,difficulty:"Easy",nutrition:{calories:320,protein:14,carbs:28,fat:18}},{title:"Greek Yogurt Parfait",ingredients:["Greek yogurt","Granola","Mixed berries","Honey"],prepTime:5,difficulty:"Easy",nutrition:{calories:280,protein:20,carbs:35,fat:8}}],lunch:[{title:"Mediterranean Quinoa Bowl",ingredients:["Quinoa","Cucumber","Tomatoes","Feta cheese","Olives","Olive oil"],prepTime:20,difficulty:"Easy",nutrition:{calories:420,protein:16,carbs:52,fat:16}},{title:"Turkey and Hummus Wrap",ingredients:["Whole wheat tortilla","Turkey slices","Hummus","Lettuce","Tomato"],prepTime:10,difficulty:"Easy",nutrition:{calories:380,protein:25,carbs:35,fat:15}}],dinner:[{title:"Baked Salmon with Roasted Vegetables",ingredients:["Salmon fillet","Broccoli","Sweet potato","Olive oil","Herbs"],prepTime:30,difficulty:"Medium",nutrition:{calories:520,protein:35,carbs:28,fat:28}},{title:"Chicken Stir-fry with Brown Rice",ingredients:["Chicken breast","Mixed vegetables","Brown rice","Soy sauce","Ginger"],prepTime:25,difficulty:"Medium",nutrition:{calories:480,protein:32,carbs:45,fat:18}}]},r=t[e]||t.lunch;return r[Math.floor(Math.random()*r.length)]}function h(e,t){let r=g(e);return({Italian:{breakfast:{title:"Cappuccino and Cornetto",ingredients:["Cornetto","Coffee","Milk"]},lunch:{title:"Margherita Pizza",ingredients:["Pizza dough","Tomato sauce","Mozzarella","Basil"]},dinner:{title:"Spaghetti Carbonara",ingredients:["Spaghetti","Eggs","Pancetta","Parmesan","Black pepper"]}},Asian:{breakfast:{title:"Congee with Pickled Vegetables",ingredients:["Rice","Chicken broth","Pickled vegetables"]},lunch:{title:"Pad Thai",ingredients:["Rice noodles","Shrimp","Bean sprouts","Peanuts","Lime"]},dinner:{title:"Teriyaki Chicken Bowl",ingredients:["Chicken","Rice","Broccoli","Teriyaki sauce"]}},Mexican:{breakfast:{title:"Huevos Rancheros",ingredients:["Eggs","Tortillas","Salsa","Beans","Cheese"]},lunch:{title:"Chicken Quesadilla",ingredients:["Tortillas","Chicken","Cheese","Peppers","Onions"]},dinner:{title:"Beef Tacos",ingredients:["Ground beef","Taco shells","Lettuce","Tomato","Cheese"]}}})[t]?.[e]||r}function y(e,t){let r={...e};switch(t.toLowerCase()){case"vegetarian":r.ingredients=e.ingredients.filter(e=>!["chicken","beef","pork","fish","salmon","turkey","shrimp"].some(t=>e.toLowerCase().includes(t))),e.title.toLowerCase().includes("chicken")&&(r.title=e.title.replace(/chicken/gi,"tofu"),r.ingredients.push("Tofu"));break;case"vegan":r.ingredients=e.ingredients.filter(e=>!["cheese","milk","eggs","butter","yogurt","chicken","beef","fish"].some(t=>e.toLowerCase().includes(t)));break;case"gluten-free":r.ingredients=e.ingredients.map(e=>e.toLowerCase().includes("bread")?"Gluten-free bread":e.toLowerCase().includes("pasta")?"Gluten-free pasta":e.toLowerCase().includes("flour")?"Gluten-free flour":e)}return r}function k(e){let t={...e};return t.ingredients=e.ingredients.map(e=>{let t=e.toLowerCase();return t.includes("salmon")?"Canned tuna":t.includes("beef")?"Ground turkey":t.includes("quinoa")?"Rice":t.includes("avocado")?"Cucumber":e}),t}function b(e){let t={...e};return t.ingredients=e.ingredients.map(e=>{let t=e.toLowerCase();return t.includes("chicken")?"Organic free-range chicken":t.includes("rice")?"Wild rice":t.includes("vegetables")?"Organic seasonal vegetables":e}),t}let w=new i.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/modify-meal-plan/route",pathname:"/api/modify-meal-plan",filename:"route",bundlePath:"app/api/modify-meal-plan/route"},resolvedPagePath:"/Users/andrewthorpe/Documents/Documents/Upstart Studio/Start Ups/KitchenAI mockup apps/KitchenAI_v1mock copy/app/api/modify-meal-plan/route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:x,staticGenerationAsyncStorage:C,serverHooks:v,headerHooks:T,staticGenerationBailout:q}=w,P="/api/modify-meal-plan/route";function S(){return(0,s.patchFetch)({serverHooks:v,staticGenerationAsyncStorage:C})}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[1638,2791,3122,6323,3421],()=>r(92459));module.exports=n})();