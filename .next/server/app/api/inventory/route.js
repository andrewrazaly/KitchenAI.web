"use strict";(()=>{var e={};e.id=666,e.ids=[666],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},14300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},82361:e=>{e.exports=require("events")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},41808:e=>{e.exports=require("net")},85477:e=>{e.exports=require("punycode")},12781:e=>{e.exports=require("stream")},24404:e=>{e.exports=require("tls")},57310:e=>{e.exports=require("url")},59796:e=>{e.exports=require("zlib")},84171:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>j,originalPathname:()=>q,patchFetch:()=>w,requestAsyncStorage:()=>f,routeModule:()=>m,serverHooks:()=>v,staticGenerationAsyncStorage:()=>h,staticGenerationBailout:()=>R});var n={};t.r(n),t.d(n,{DELETE:()=>g,GET:()=>l,POST:()=>x,PUT:()=>y});var s=t(95419),o=t(69108),i=t(99678),a=t(98984),u=t(57699),p=t(7439);async function c(){try{let e=(0,u.createServerComponentClient)({cookies:p.cookies}),{data:{session:r}}=await e.auth.getSession();if(!r?.user)return null;return{user:{id:r.user.id}}}catch(e){return console.error("Error:",e),null}}let d=new Map;async function l(e){try{let r=await c();if(!r?.user)return a.NextResponse.json({error:"Unauthorized"},{status:401});let t=r.user.id,{searchParams:n}=new URL(e.url),s=n.get("location"),o=n.get("category"),i=d.get(t)||[];return s&&(i=i.filter(e=>e.location===s)),o&&(i=i.filter(e=>e.category===o)),i=i.sort((e,r)=>e.expiry_date?r.expiry_date?new Date(e.expiry_date).getTime()-new Date(r.expiry_date).getTime():-1:1),a.NextResponse.json(i)}catch(e){return console.error("Error fetching inventory:",e),a.NextResponse.json({error:"Internal Server Error"},{status:500})}}async function x(e){try{let r=await c();if(!r?.user)return a.NextResponse.json({error:"Unauthorized"},{status:401});let t=r.user.id,n={...await e.json(),id:Math.random().toString(36).substring(2,15),user_id:t,created_at:new Date().toISOString()},s=d.get(t)||[];return s.push(n),d.set(t,s),a.NextResponse.json(n,{status:201})}catch(e){return console.error("Error creating inventory item:",e),a.NextResponse.json({error:"Internal Server Error"},{status:500})}}async function y(e){try{let r=await c();if(!r?.user)return a.NextResponse.json({error:"Unauthorized"},{status:401});let t=r.user.id,{id:n,...s}=await e.json(),o=d.get(t)||[],i=o.findIndex(e=>e.id===n&&e.user_id===t);if(-1===i)return a.NextResponse.json({error:"Item not found"},{status:404});let u={...o[i],...s,updated_at:new Date().toISOString()};return o[i]=u,d.set(t,o),a.NextResponse.json(u)}catch(e){return console.error("Error updating inventory item:",e),a.NextResponse.json({error:"Internal Server Error"},{status:500})}}async function g(e){try{let r=await c();if(!r?.user)return a.NextResponse.json({error:"Unauthorized"},{status:401});let t=r.user.id,{searchParams:n}=new URL(e.url),s=n.get("id");if(!s)return a.NextResponse.json({error:"Item ID is required"},{status:400});let o=d.get(t)||[],i=o.findIndex(e=>e.id===s&&e.user_id===t);if(-1===i)return a.NextResponse.json({error:"Item not found"},{status:404});return o[i],o.splice(i,1),d.set(t,o),a.NextResponse.json({message:"Item deleted successfully"})}catch(e){return console.error("Error deleting inventory item:",e),a.NextResponse.json({error:"Internal Server Error"},{status:500})}}let m=new s.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/inventory/route",pathname:"/api/inventory",filename:"route",bundlePath:"app/api/inventory/route"},resolvedPagePath:"/Users/andrewthorpe/Documents/Documents/Upstart Studio/Start Ups/KitchenAI mockup apps/KitchenAI_v1mock copy/app/api/inventory/route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:f,staticGenerationAsyncStorage:h,serverHooks:v,headerHooks:j,staticGenerationBailout:R}=m,q="/api/inventory/route";function w(){return(0,i.patchFetch)({serverHooks:v,staticGenerationAsyncStorage:h})}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),n=r.X(0,[1638,2791,3122,6323,3421],()=>t(84171));module.exports=n})();